<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Lua Obfuscator</title>
  <style>
    body {
      font-family: monospace;
      padding: 40px;
      background-color: #1e1e1e;
      color: #d4d4d4;
    }
    textarea {
      width: 100%;
      height: 200px;
      background: #2d2d2d;
      color: #d4d4d4;
      border: none;
      padding: 10px;
      resize: vertical;
    }
    button {
      margin-top: 10px;
      padding: 10px 20px;
      background: #007acc;
      color: white;
      border: none;
      cursor: pointer;
    }
    button:hover {
      background: #005fa3;
    }
    h1 {
      color: #61dafb;
    }
  </style>
</head>
<body>
  <h1>Lua Obfuscator</h1>
  <p>Paste your Lua code below:</p>
  <textarea id="input" placeholder="Enter Lua code here..."></textarea><br>
  <button onclick="obfuscateLua()">Obfuscate</button>

  <h3>Obfuscated Output:</h3>
  <textarea id="output" readonly></textarea>

  <script>
    function obfuscateLua() {
      const input = document.getElementById('input').value;

      // Remove single-line comments
      let code = input.replace(/--.*/g, '');

      // Remove extra whitespace
      code = code.replace(/\s+/g, ' ').trim();

      // Rename local variables (simple pattern)
      let varIndex = 0;
      const varMap = {};
      code = code.replace(/\blocal\s+(\w+)/g, function(match, varName) {
        const newVar = 'v' + varIndex++;
        varMap[varName] = newVar;
        return 'local ' + newVar;
      });

      // Replace all references to those vars
      for (const [original, obf] of Object.entries(varMap)) {
        const re = new RegExp(`\\b${original}\\b`, 'g');
        code = code.replace(re, obf);
      }

      document.getElementById('output').value = code;
    }
  </script>
</body>
</html>